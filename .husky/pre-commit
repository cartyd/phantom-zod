# Check we're not on main branch
echo "🔍 Checking current branch..."
CURRENT_BRANCH=$(git branch --show-current)
if [ "$CURRENT_BRANCH" = "main" ]; then
    echo "❌ ERROR: Cannot commit directly to main branch!"
    echo "💡 Create a feature branch first: git checkout -b feature/your-description"
    exit 1
fi
echo "✅ On feature branch: $CURRENT_BRANCH"

# Format code first
npm run format

# Run lint-staged for staged files
npx lint-staged

# Run full validation to ensure everything passes
echo "🧪 Running full validation before commit..."
npm run validate
